var acpositionjs;(()=>{"use strict";var t={d:(i,e)=>{for(var s in e)t.o(e,s)&&!t.o(i,s)&&Object.defineProperty(i,s,{enumerable:!0,get:e[s]})},o:(t,i)=>Object.prototype.hasOwnProperty.call(t,i)},i={};t.d(i,{default:()=>l});const e=function(t){return t.toString(16)},s=101.95,o=new RegExp(/^(?:Your location is: )?(0[xX][0-9a-fA-F]+) \[([+-]?[0-9]+\.?[0-9]*|\.[0-9]+) ([+-]?[0-9]+\.?[0-9]*|\.[0-9]+) ([+-]?[0-9]+\.?[0-9]*|\.[0-9]+)\] ([+-]?[0-9]+\.?[0-9]*|\.[0-9]+) ([+-]?[0-9]+\.?[0-9]*|\.[0-9]+) ([+-]?[0-9]+\.?[0-9]*|\.[0-9]+) ([+-]?[0-9]+\.?[0-9]*|\.[0-9]+)$/,"g"),a=new RegExp(/^(\d+(?:\.\d+)?[ns])(?:,\s{0,1}|\s{1})(\d+(?:\.\d+)?[ew])$/,"i");class l{static GLOBAL_COORDS_MAX=48960;static GLOBAL_COORDS_MIN=0;static BLOCK_LENGTH=192;static CELL_SIDE=8;static CELL_LENGTH=24;constructor(t,i=0,s=0,o=0,a=1,r=0,n=0,c=0){if(!t)throw new Error("No objCellId provided");this.objCellId=Number(t),this.position=[i,s,o],this.rotation=[a,r,n,c],this.landblock=this.ObjCellId>>16,this.cellX=Math.trunc(((65535&t)-1)/8),this.cellY=Math.trunc(((65535&t)-1)%8),this.cell=this.cellX*l.CELL_SIDE+this.cellY+1,this.landblockX=this.objCellId>>24&255,this.landblockY=this.objCellId>>16&255,this.globalCellX=8*this.landblockX+this.cellX,this.globalCellY=8*this.landblockY+this.cellY,this.objCellIdHex="0x"+e(this.objCellId).padStart(8,"0").toUpperCase(),this.landblockHex=e(this.landblock).padStart(4,"0").toUpperCase(),this.cellHex=this.decToHex(this.cell).padStart(4,"0").toUpperCase()}get originZ(){return this.position[2]}set originZ(t){this.position[2]=t}static deserialize(t){if(!l.isValidLocString(t))throw new TypeError("Invalid Loc string");const i=o.exec(t);o.lastIndex=0;const e=i[1],s=[i[2],i[3],i[4]].map((t=>parseFloat(t,10))),a=[i[5],i[6],i[7],i[8]].map((t=>parseFloat(t,10)));return new l(e,s[0],s[1],s[2],a[0],a[1],a[2],a[3])}static fromRadar(t){if(!l.isValidRadar(t))throw new TypeError("Invalid radar coordinates");const i=a.exec(t);a.lastIndex=0;let e=parseFloat(i[2]),o=parseFloat(i[1]);(i[2].endsWith("W")||i[2].endsWith("w"))&&(e*=-1),(i[1].endsWith("S")||i[1].endsWith("s"))&&(o*=-1);const r=240*(e+s),n=240*(o+s),c=Math.trunc(r/l.BLOCK_LENGTH),h=Math.trunc(n/l.BLOCK_LENGTH),d=r%l.BLOCK_LENGTH,L=n%l.BLOCK_LENGTH,C=Math.trunc(d/l.CELL_LENGTH),b=Math.trunc(L/l.CELL_LENGTH),p=C*l.CELL_SIDE+b+1,u=l.toObjCellId(c,h,p);return new l(u,d,L)}static fromGlobal(t,i){if(t>this.GLOBAL_COORDS_MAX||t<this.GLOBAL_COORDS_MIN||i>this.GLOBAL_COORDS_MAX||i<this.GLOBAL_COORDS_MIN)throw new RangeError("World coordinates are out of bounds");{const e=t%192,s=i%192,o=Math.trunc(e/l.CELL_LENGTH),a=Math.trunc(s/l.CELL_LENGTH),r=o*l.CELL_SIDE+a+1,n=Math.trunc(t/192),c=Math.trunc(i/192),h=l.toObjCellId(n,c,r);return new l(h,e,s)}}static toObjCellId(t,i,e){if(!t&&!i&&!e)throw new Error("Invalid parameters");return(t<<24|i<<16|e)>>>0}static isValidLocString(t){const i=o.test(t);return o.lastIndex=0,i}static isValidRadar(t){const i=a.test(t);return a.lastIndex=0,i}serialize(){return`${this.objCellIdHex} [${this.position.map((t=>Number(t).toFixed(6))).join(" ")}] ${this.rotation.map((t=>Number(t).toFixed(6))).join(" ")}`}toRadar(t){const i=.1*(this.globalCellX-1024)+.5,e=.1*(this.globalCellY-1024)+.5,s=i>=0?Math.abs(i).toFixed(1)+"E":Math.abs(i).toFixed(1)+"W",o=e>=0?Math.abs(e).toFixed(1)+"N":Math.abs(e).toFixed(1)+"S";let a;return a=t?[o,s]:`${o}, ${s}`,a}toGlobal(){return{x:192*this.landblockX+this.position[0],y:192*this.landblockY+this.position[1],z:this.position[2]}}}acpositionjs=i.default})();