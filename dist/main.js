!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var o=e();for(var i in o)("object"==typeof exports?exports:t)[i]=o[i]}}(self,(function(){return t={279:(t,e)=>{e.GLOBAL_COORDS_MAX=48960,e.GLOBAL_COORDS_MIN=0,e.BLOCK_LENGTH=192,e.CELL_SIDE=8,e.CELL_LENGTH=24,e.RADAR_SOUTHWEST=101.95,e.LOC_STRING_REGEXP=new RegExp(/^(?:Your location is: )?(0[xX][0-9a-fA-F]+) \[([+-]?[0-9]+\.?[0-9]*|\.[0-9]+) ([+-]?[0-9]+\.?[0-9]*|\.[0-9]+) ([+-]?[0-9]+\.?[0-9]*|\.[0-9]+)\] ([+-]?[0-9]+\.?[0-9]*|\.[0-9]+) ([+-]?[0-9]+\.?[0-9]*|\.[0-9]+) ([+-]?[0-9]+\.?[0-9]*|\.[0-9]+) ([+-]?[0-9]+\.?[0-9]*|\.[0-9]+)$/,"g"),e.RADAR_COORDS_REGEXP=new RegExp(/^(\d+(?:\.\d+)?[ns])(?:,\s{0,1}|\s{1})(\d+(?:\.\d+)?[ew])$/,"i")},138:(t,e,o)=>{const i=o(555),r=o(279);class s{static GLOBAL_COORDS_MAX=r.GLOBAL_COORDS_MAX;static GLOBAL_COORDS_MIN=r.GLOBAL_COORDS_MIN;static BLOCK_LENGTH=r.BLOCK_LENGTH;static CELL_SIDE=r.CELL_SIDE;static CELL_LENGTH=r.CELL_LENGTH;constructor(t,e=0,o=0,r=0,n=1,a=0,l=0,c=0){if(!t)throw new Error("No objCellId provided");this.objCellId=Number(t),this.position=[e,o,r],this.rotation=[n,a,l,c],this.landblock=this.ObjCellId>>16,this.cellX=Math.trunc(((65535&t)-1)/8),this.cellY=Math.trunc(((65535&t)-1)%8),this.cell=this.cellX*s.CELL_SIDE+this.cellY+1,this.landblockX=this.objCellId>>24&255,this.landblockY=this.objCellId>>16&255,this.globalCellX=8*this.landblockX+this.cellX,this.globalCellY=8*this.landblockY+this.cellY,this.objCellIdHex="0x"+i.decToHex(this.objCellId).padStart(8,"0").toUpperCase(),this.landblockHex=i.decToHex(this.landblock).padStart(4,"0").toUpperCase(),this.cellHex=this.decToHex(this.cell).padStart(4,"0").toUpperCase()}get originZ(){return this.position[2]}set originZ(t){this.position[2]=t}static deserialize(t){if(!s.isValidLocString(t))throw new TypeError("Invalid Loc string");const e=r.LOC_STRING_REGEXP.exec(t);r.LOC_STRING_REGEXP.lastIndex=0;const o=e[1],i=[e[2],e[3],e[4]].map((t=>parseFloat(t,10))),n=[e[5],e[6],e[7],e[8]].map((t=>parseFloat(t,10)));return new s(o,i[0],i[1],i[2],n[0],n[1],n[2],n[3])}static fromRadar(t){if(!s.isValidRadar(t))throw new TypeError("Invalid radar coordinates");const e=r.RADAR_COORDS_REGEXP.exec(t);r.RADAR_COORDS_REGEXP.lastIndex=0;let o=parseFloat(e[2]),i=parseFloat(e[1]);(e[2].endsWith("W")||e[2].endsWith("w"))&&(o*=-1),(e[1].endsWith("S")||e[1].endsWith("s"))&&(i*=-1);const n=240*(o+r.RADAR_SOUTHWEST),a=240*(i+r.RADAR_SOUTHWEST),l=Math.trunc(n/s.BLOCK_LENGTH),c=Math.trunc(a/s.BLOCK_LENGTH),L=n%s.BLOCK_LENGTH,d=a%s.BLOCK_LENGTH,h=Math.trunc(L/s.CELL_LENGTH),E=Math.trunc(d/s.CELL_LENGTH),_=h*s.CELL_SIDE+E+1,O=s.toObjCellId(l,c,_);return new s(O,L,d)}static fromGlobal(t,e){if(t>this.GLOBAL_COORDS_MAX||t<this.GLOBAL_COORDS_MIN||e>this.GLOBAL_COORDS_MAX||e<this.GLOBAL_COORDS_MIN)throw new RangeError("World coordinates are out of bounds");{const o=t%192,i=e%192,r=Math.trunc(o/s.CELL_LENGTH),n=Math.trunc(i/s.CELL_LENGTH),a=r*s.CELL_SIDE+n+1,l=Math.trunc(t/192),c=Math.trunc(e/192),L=s.toObjCellId(l,c,a);return new s(L,o,i)}}static toObjCellId(t,e,o){if(!t&&!e&&!o)throw new Error("Invalid parameters");return(t<<24|e<<16|o)>>>0}static isValidLocString(t){const e=r.LOC_STRING_REGEXP.test(t);return r.LOC_STRING_REGEXP.lastIndex=0,e}static isValidRadar(t){const e=r.RADAR_COORDS_REGEXP.test(t);return r.RADAR_COORDS_REGEXP.lastIndex=0,e}serialize(){return`${this.objCellIdHex} [${this.position.map((t=>Number(t).toFixed(6))).join(" ")}] ${this.rotation.map((t=>Number(t).toFixed(6))).join(" ")}`}toRadar(t){const e=.1*(this.globalCellX-1024)+.5,o=.1*(this.globalCellY-1024)+.5,i=e>=0?Math.abs(e).toFixed(1)+"E":Math.abs(e).toFixed(1)+"W",r=o>=0?Math.abs(o).toFixed(1)+"N":Math.abs(o).toFixed(1)+"S";let s;return s=t?[r,i]:`${r}, ${i}`,s}toGlobal(){return{x:192*this.landblockX+this.position[0],y:192*this.landblockY+this.position[1],z:this.position[2]}}}t.exports=s},555:(t,e)=>{e.base64UrlEncode=function(t){return Buffer.from(t.toString()).toString("base64url")},e.base64UrlDecode=function(t){return Buffer(t,"base64url").toString("ascii")},e.hexToDec=function(t){return parseInt(t,16)},e.decToHex=function(t){return t.toString(16)},e.isDungeon=function(t){}}},e={},function o(i){var r=e[i];if(void 0!==r)return r.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,o),s.exports}(138);var t,e}));